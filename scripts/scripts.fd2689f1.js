"use strict";angular.module("birthdayMovieApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("birthdayMovieApp").controller("MainCtrl",["$scope","$sce","moviedb",function(a,b,c){a.discover=function(d,e,f){try{var g=new Date(f,d,e)}catch(h){return void(a.errors="Invalid Date.")}var i=g.toISOString().substring(0,10);g.setMonth(g.getMonth()-2);var j,k=g.toISOString().substring(0,10),l=c.discover(k,i);l.then(function(d){a.urlVideo=null;for(var e=0,f=d.data.results.length;f>e;e++)if("en"==d.data.results[e].original_language){a.movie=d.data.results[e],j=d.data.results[e].id;break}if(j){var g=c.videos(j);g.then(function(c){if(c.data.results)for(var d=0,e=c.data.results.length;e>d&&("YouTube"!=c.data.results[d].site||(a.urlVideo=b.trustAsResourceUrl("https://www.youtube.com/embed/"+c.data.results[d].key),"Trailer"!=c.data.results[d].name));d++);})}})}}]),angular.module("birthdayMovieApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("birthdayMovieApp").service("moviedb",["$http","config",function(a,b){var c={discover:function(c,d){return a.get(b.urlMovie+"discover/movie",{params:{api_key:b.key,sort_by:"popularity.desc",language:"en","primary_release_date.gte":c,"primary_release_date.lte":d}})},videos:function(c){return a.get(b.urlMovie+"movie/"+c+"/videos",{params:{api_key:b.key}})}};return c}]),angular.module("birthdayMovieApp").constant("config",{key:"ff7fa02915424ca79751e6031e46d4a3",urlMovie:"http://api.themoviedb.org/3/",urlYouTube:"https://www.youtube.com/embed/"}),angular.module("birthdayMovieApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row"> <div class="panel panel-default"> <div class="panel-body"> <h3 class="center">What is your birthdate?</h3> <form novalidate class="form-inline"> <select class="form-control" id="sel1" placeholder="Month" ng-model="month"> <option value="">Month</option> <option value="0">January</option> <option value="1">February</option> <option value="2">March</option> <option value="3">April</option> <option value="4">May</option> <option value="5">June</option> <option value="6">July</option> <option value="7">August</option> <option value="8">September</option> <option value="9">October</option> <option value="10">November</option> <option value="11">December</option> </select> <input class="form-control" type="text" maxlength="2" placeholder="Day" ng-model="day"> <input class="form-control" type="text" maxlength="4" placeholder="Year" ng-model="year"> <!-- <input type="date" id="inputDate" class="form-control" ng-model="date"/> --> <button type="button" class="btn btn-success" ng-click="discover(month, day, year)">Discover</button> <div class="alert alert-warning" role="alert" ng-show="errors">{{errors}}</div> </form> </div> </div> </div> <div class="row"> <div class="panel panel-default" ng-show="movie"> <div class="panel-body"> <div class="media"> <div class="media-left media-top"> <img class="media-object" alt="{{movie.title}}" src="http://image.tmdb.org/t/p/w185/{{movie.poster_path}}"> </div> <div class="media-body"> <h2 class="media-heading">{{movie.title}}</h2> <p>{{movie.overview}} </p></div> </div> <br> <div class="embed-responsive embed-responsive-16by9" ng-show="urlVideo"> <iframe class="embed-responsive-item" width="560" height="315" ng-src="{{urlVideo}}" frameborder="0" allowfullscreen></iframe> </div> </div> </div> </div>')}]);