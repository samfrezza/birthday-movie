"use strict";angular.module("birthdayMovieApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("birthdayMovieApp").controller("MainCtrl",["$scope","$sce","moviedb",function(a,b,c){a.discover=function(d){var e=new Date(d),f=e.toISOString().substring(0,10);e.setMonth(e.getMonth()-2);var g,h=e.toISOString().substring(0,10),i=c.discover(h,f);i.then(function(d){a.urlVideo=null;for(var e=0,f=d.data.results.length;f>e;e++)if("en"==d.data.results[e].original_language){a.movie=d.data.results[e],g=d.data.results[e].id;break}if(g){var h=c.videos(g);h.then(function(c){if(c.data.results)for(var d=0,e=c.data.results.length;e>d&&("YouTube"!=c.data.results[d].site||(a.urlVideo=b.trustAsResourceUrl("https://www.youtube.com/embed/"+c.data.results[d].key),"Trailer"!=c.data.results[d].name));d++);})}})}}]),angular.module("birthdayMovieApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("birthdayMovieApp").service("moviedb",["$http","config",function(a,b){var c={discover:function(c,d){return a.get(b.urlMovie+"discover/movie",{params:{api_key:b.key,sort_by:"popularity.desc",language:"pt","primary_release_date.gte":c,"primary_release_date.lte":d}})},videos:function(c){return a.get(b.urlMovie+"movie/"+c+"/videos",{params:{api_key:b.key}})}};return c}]),angular.module("birthdayMovieApp").constant("config",{key:"ff7fa02915424ca79751e6031e46d4a3",urlMovie:"http://api.themoviedb.org/3/",urlYouTube:"https://www.youtube.com/embed/"}),angular.module("birthdayMovieApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="row"> <div class="panel panel-default"> <div class="panel-body"> <form novalidate class="form-inline"> <label for="inputDate">Birthdate </label> <input type="date" id="inputDate" class="form-control" ng-model="date"> <button type="button" class="btn btn-success" ng-click="discover(date)">Discover</button> </form> </div> </div> </div> <div class="row"> <div class="panel panel-default"> <div class="panel-body"> <div class="media" ng-show="movie"> <div class="media-left media-top"> <img class="media-object" alt="{{movie.title}}" src="http://image.tmdb.org/t/p/w185/{{movie.poster_path}}"> </div> <div class="media-body"> <h2 class="media-heading">{{movie.title}}</h2> <p>{{movie.overview}} </p></div> </div> <br> <div class="embed-responsive embed-responsive-16by9" ng-show="urlVideo"> <iframe class="embed-responsive-item" width="560" height="315" ng-src="{{urlVideo}}" frameborder="0" allowfullscreen></iframe> </div> </div> </div> </div>')}]);